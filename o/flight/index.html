<!DOCTYPE html>
<html>
  <head>
    <title>How many times can I watch a movie</title>
    <script src="https://cdn.tailwindcss.com/"></script>
    <script src="https://kit.fontawesome.com/9b0ce6c700.js" crossorigin="anonymous"></script>
  </head>
  <body class="bg-white font-black">
    <div class="min-h-screen flex flex-col justify-center items-center">
      <div class="text-center">
        My <select class="p-1 rounded-md bg-yellow-100" name="type" id="typebox">
          <option value="flight">flight</option>
          <option value="car">car journey</option>
          <option value="train">train</option>
          <option value="freetime">free time</option>
          <option value="xmas">christmas</option>
          <option value="life">life</option>
        </select> is
        <input id="hours" placeholder="5" class="text-neutral-700 focus:outline-none w-5 rounded-md bg-yellow-100"></input>
        hours
        <input id="minutes" placeholder="20" class="text-neutral-700 focus:outline-none w-5 rounded-md bg-yellow-100"></input>
        minutes long.
        <button onclick="calculate()" class="text-white bg-slate-800 ml-2 p-2 rounded-xl shadow-xl">Check</button><br/>
      </div>
      <div id="movieResults" class="text-black text-center mt-3 p-3"></div>
    </div>
    <script>
      async function calculate() {
        var hours = document.getElementById("hours").value;
        var minutes = document.getElementById("minutes").value;
        var totalMinutes = (Number(hours) * 60) + Number(minutes);
        
        const response = await fetch('movies.json');
        const movies = await response.json();
        
        document.getElementById("movieResults").innerHTML = '';

        movies.forEach(movie => {
          const { name, length } = movie;
          const result = Math.floor(totalMinutes / length);
          const movieElement = document.createElement('div');
          if (result != 1) {
            var sq = "s"
          } else {
            var sq = ""
          }
          movieElement.innerHTML = `You can watch <i>${name}</i> <span class="ml-1 mr-1 text-yellow-400">${result}</span> time${sq}`;
          movieElement.className = `mt-3`
          document.getElementById("movieResults").appendChild(movieElement);
        });
      }
    </script>
  </body>
</html>
